<div id="orderform_table"></div>
<script>
$(function(){
	var datagrid;
	var op;
	var flag;
	var editRow=undefined;//编辑的行
	datagrid=$("#orderform_table").datagrid({
		url:'orderform_listAllOrder.action',
		pagination:true,//分页属性
		pageSize:3,//初始化时每页显示的行数
		pageList:[1,3,5,7,10],//初始化时每页显示的行数列表
		columns:[[
			{field:'orderid',title:'订单编号',width:200,align:'center'},
			{field:'riqi',title:'购买日期',width:200,align:'center',editor:{type:"text",options:{required:true}}},
			{field:'uId',title:'用户编号',width:200,align:'center',editor:{type:"text",options:{required:true}}},
			{field:'proNumber',title:'商品编号',width:200,align:'center',editor:{type:"text",options:{required:true}}},
			{field:'buyNumber',title:'购买数量',width:200,align:'center',editor:{type:"text",options:{required:true}}},
			{field:'buyprice',title:'购买价格',width:200,align:'center',editor:{type:"text",options:{required:true}}},
			{field:'pid',title:'地址编号',width:200,align:'center',editor:{type:"text",options:{required:true}}},
			{field:'orderflag',title:'订单状态',width:200,align:'center',editor:{type:"text",options:{required:true}},
				formatter : function(value, row, index) {
						if (value == 1) {
							return "已支付";
						} else if (value == 0) {
							return "未支付";
						}
					}
			},
			{field:'commentsflag',title:'评论',width:200,align:'center',editor:{type:"text",options:{required:true}}}
			
		]],
		toolbar : [
									{
										text : '查看销量',
										iconCls : 'icon-add',
										handler : function() {
											$.post("../bar.do?op=findxl",{op:"findxl"},function(data){
												var arr1=new Array(data.obj.length);
												var arr2=new Array(data.obj.length);
												for(var i=0;i<data.obj.length;i++){
													arr1[i]=data.obj[i].pro_name;
													arr2[i]=data.obj[i].total;
												}
											
												var myChart=echarts.init(document.getElementById('main'));
												var option={
													title:{text:'商家销量统计'},tooltip:{},legend:{data:['销量']},xAxis:{data:arr1},
													yAxis:{},
													series:[{
														name:'销量',
														type:'bar',
														data:arr2
													}]
												};
												myChart.setOption(option);
											},"json");
											$("#showbaobiao").dialog("open");
										}
									}]
	});
});	
</script>
<div id="showbaobiao" class="easyui-dialog" title="销量"
	data-options="fit:true,iconCls:'icon-add',resizable:true,modal:true,closed:true">
	<div id="main"></div>
	
</div>
